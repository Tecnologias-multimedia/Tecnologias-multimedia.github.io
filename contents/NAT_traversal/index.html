<!DOCTYPE html> 
<html lang='en-US' xml:lang='en-US'> 
<head> <title>NAT Traversal</title> 
<meta charset='utf-8' /> 
<meta content='TeX4ht (https://tug.org/tex4ht/)' name='generator' /> 
<meta content='width=device-width,initial-scale=1' name='viewport' /> 
<link href='index.css' rel='stylesheet' type='text/css' /> 
<meta content='index.tex' name='src' /> 
<script>window.MathJax = { tex: { tags: "ams", }, }; </script> 
 <script async='async' id='MathJax-script' src='https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js' type='text/javascript'></script>  
</head><body>
   <div class='maketitle'>
                                                                  

                                                                  
                                                                  

                                                                  

<h2 class='titleHead'>NAT Traversal</h2>
 <div class='author'><a href='https://vicente-gonzalez-ruiz.github.io/'><span class='ecrm-1200'>Vicente González Ruiz</span></a> <span class='ecrm-1200'>&amp; </span><a href='https://www.marcoslupion.com/'><span class='ecrm-1200'>Marcos Lupión Lorente</span></a></div><br />
<div class='date'><span class='ecrm-1200'>September 10, 2023</span></div>
   </div>
   <h3 class='sectionHead'><span class='titlemark'>1   </span> <a id='x1-10001'></a>NAT-ing for what?</h3>
<!-- l. 9 --><p class='noindent'>One of the main problems that applications that transmit data over the Internet must face is
the use of NATs (Network Address Translators). A NAT is a network device that converts public
end-points<span class='footnote-mark'><a href='#fn1x0' id='fn1x0-bk'><sup class='textsuperscript'>1</sup></a></span><a id='x1-1001f1'></a>
to private end-points and vice versa. Due to this, the consumption rate of IPv4
addresses has dropped drastically and has meant that IPv6 is still not the dominant
network communication protocol, as expected.
</p><!-- l. 17 --><p class='indent'>   The real reason for this is that only public servers really need a public IP address,
and the vast majority of Internet users use private IP addresses on their local devices.
This basically means that in each of the companies that do not offer IP services from
their corporate network, and that in each of our homes, where we do not install
public servers either, we are reusing the same range of private IP addresses over and
over again.
</p><!-- l. 25 --><p class='noindent'>
</p>
   <h3 class='sectionHead'><span class='titlemark'>2   </span> <a id='x1-20002'></a>Negative consequences</h3>
<!-- l. 27 --><p class='noindent'>The main drawback of using NAT devices is that for two network applications, A and
B, that use IP and run on two hosts belonging to two different private networks, with
NAT-A and NAT-B respectively, to be able to communicate, it is necessary for A to
know the end-point used in NAT-B for incoming traffic from NAT-A to B (through
NAT-A), and obviously, B must know the end-point used in NAT-A for incoming
traffic to A (from NAT-B).
                                                                  

                                                                  
</p><!-- l. 35 --><p class='noindent'>
</p>
   <h3 class='sectionHead'><span class='titlemark'>3   </span> <a id='x1-30003'></a>NAT configuration</h3>
<!-- l. 37 --><p class='noindent'>But how do we tell NAT-A to let traffic to A from NAT-B through, and vice versa?
Well, there are basically 2 alternatives:
</p><!-- l. 40 --><p class='indent'>
     </p><ol class='enumerate1'>
<li class='enumerate' id='x1-3002x1'>Open ports “by hand”, in both NATs, to indicate the public port open
     for incoming traffic to the process. For example, if A runs on end-point
     192.168.1.2:4000 and the open public port is 5000, all UDP traffic arriving
     at port 5000 from the Internet should be sent to end-point 192.168.1.2:
     4000. Normally, to do this, it is necessary to have access to the NAT as
     an administrator.
     </li>
<li class='enumerate' id='x1-3004x2'>Create the appropriate entries in the NAT tables so that communication
     between A and B is possible. This should happen if both A and B know
     the end-point of their interlocutor and send UDP traffic from A to B and
     from B to A at the same time.</li></ol>
<!-- l. 54 --><p class='indent'>   Obviously, the most transparent option for the user is the second.
</p><!-- l. 56 --><p class='noindent'>
</p>
   <h3 class='sectionHead'><span class='titlemark'>4   </span> <a id='x1-40004'></a>Deliverables</h3>
<!-- l. 58 --><p class='noindent'>A Python module called <span class='ectt-1000'>NAT_traversal.py </span>that inherits from <span class='ectt-1000'>minimal.py </span>and that
implements the previously presented idea.
</p><!-- l. 61 --><p class='noindent'>
</p>
   <h3 class='sectionHead'><span class='titlemark'>5   </span> <a id='x1-50005'></a>Resources</h3>
<p><a id='Q1-1-6'></a></p>
   <div class='footnotes'><!-- l. 12 --><p class='indent'>     <span class='footnote-mark'><a href='#fn1x0-bk' id='fn1x0'><sup class='textsuperscript'>1</sup></a></span><span class='ecrm-0800'>An end-point is a tuple made up of an IP address and a port.</span></p>                              </div>
 
</body> 
</html>