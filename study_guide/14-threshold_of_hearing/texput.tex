\input{../definitions}
\title{\TM{} - Study Guide - Milestone 14: Considering the Threshold of Hearing}

\maketitle

\section{Description}

\subsection{Absolute Threshold of Human Hearing}
Psychoacoustics has determined that the HAS (Human Auditory System)
has a sensitivity that depends on the frequency of the sound, the so
called THH
(\href{https://en.wikipedia.org/wiki/Absolute_threshold_of_hearing}{Threshold
  of Human Hearing}). This basically means that some subbands can be
quantized with a larger quantization step than others without a
noticeable increase (from a perfection perspective) of the
quantization noise.

\begin{figure}
  \centering
  \svg{graphics/ToHH}{600}
  \caption{Absolute threshold of human hearing.}
  \label{fig:ToHH}
\end{figure}

A good approximation of the ToHH (Threshold of Human Hearing) for a 20-years old person can be
obtained with~\cite{bosi2003intro}
\begin{equation}
  T(f)\text{[dB]} = 3.64(f\text{[kHz]})^{-0.8} - 6.5e^{f\text{[kHz]}-3.3)^2} + 10^{-3}(f\text{[kHz]})^4.
  \label{eq:ToHH}
\end{equation}
This equation has been plotted in the Fig.~\ref{fig:ToHH}.

\subsection{DWT subbands and quantization steps}
The number of DWT subbands
\begin{equation}
  N_{\text{sb}} = N_{\text{levels}} + 1
\end{equation}
where $N_{\text{levels}}$ is the number of levels of the DWT. Except for
the ${\mathbf l}^{N_{\text{levels}}}$ subband, it holds that
\begin{equation}
  W({\mathbf h}^s) = \frac{1}{2}W({\mathbf h}^{s-1}),
\end{equation}
being $W(\cdot)$ the bandwidth of the corresponding
subband $s$. Therefore, considering that the bandwidth of the audio signal
is $22050$ Hz, the bandwidth $W({\mathbf h}^1)$ of the ${\mathbf h}^1$ subband is $11025$ Hz,
$W({\mathbf h} ^2)=22025/4$, and so on. It also holds that
\begin{equation}
  W({\mathbf l}^{N_{\text{levels}}}) = W({\mathbf h}^{N_{\text{levels}}}).
\end{equation}

The idea is to determine, knowning the frequencies represented in each
DWT subband and the THH curve, the average quantization step that
should be applied to each subband.

\section{What you have to do?}

%and
%  considering that $\Delta$ is the ``master'' quantization step that
%  will control the overall loss of quality,
  
\begin{enumerate}
\item Given a $N_{\text{levels}}$, determine the bandwidth of each
  subband. Using these bandwidths, find the interval of frequencies of
  each subband. Using these intervals and the Eq.~\ref{eq:ToHH},
  determine a suitable quantization step $\Delta_s$ for each subband
  $s$, supposing that the subband with the highest sentibility (those
  that represents audio signals close to $3$ KHz) should not be
  quantized (or quantized with a $\Delta=1$). Use the average of the
  function defined by Eq.~\ref{eq:ToHH} in the corresponding subband
  $s$ as $\Delta_s$.
\item Quantize and dequantize each subband with the corresponding
  $\Delta_s$, using a dead-zone quantizer.
\end{enumerate}

\section{Timming}

This is the final milestone. Present your results in the exam time.

\section{Deliverables}

The module threshold.py (inheriting from temporal\_overlapped\_DWT\_coding.py). Store it at the
\href{https://github.com/Tecnologias-multimedia/intercom}{root
  directory} of your InterCom's repo.

\section{Resources}

\bibliography{maths,data-compression,DWT,audio-coding}

