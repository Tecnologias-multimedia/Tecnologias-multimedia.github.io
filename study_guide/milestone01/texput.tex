\title{\href{https://www.ual.es/estudios/grados/presentacion/plandeestudios/asignatura/4015/40154321?idioma=zh_CN}{TecnologÃ­as Multimedia} - Study Guide - Milestone 1: Git, GitHub and the Workflow}

\maketitle

\begin{figure}
\begin{verbatim}
+-------------------------------------------+   +-----------+
|              Local Host                   |   |Remote Host|
---------------------------------------------   -------------
+-----------+   +-----------+   +-----------+   +-----------+
|  Working  |   |  Staging  |   |   Local   |   |   Origin  |
|   Tree    |   |   Area    |   |   Repo    |   |    Repo   |
+-----------+   +-----------+   +-----------+   +-----------+
      |               |               |               |
      +----- add ---->|               |               |
      |               +----commit --->|               |
      |               |               +---- push ---->|
      |               |               |<--- pull -----+
      |<----------- checkout ---------+               |
      |<------------ merge -----------+               |
\end{verbatim}
\caption{Structure-of and actions-on a Git repo.}
\label{fig:local_repo_structure_and_actions}
\end{figure}

\section{Description}

To work in
\href{https://github.com/Tecnologias-multimedia/intercom}{the InterCom
  project} \cite{intercom} you will need to understand the basics of
Git \cite{Git-book} and
\href{https://github.com/}{GitHub}\footnote{There are other Git-based
hosting services such as \href{https://about.gitlab.com/}{GitLab} and
\href{https://www.atlassian.com/git}{Altassian}/\href{https://bitbucket.org/product}{BitBucket},
but GitHub is the most used one.} \cite{GitHub}, and how to use the
\href{https://guides.github.com/introduction/flow/index.html}{The
  GitHub (Work)Flow} and the
\href{https://github.com/vicente-gonzalez-ruiz/fork_and_branch_git_workflow}{Fork-and-Branch
  Git Workflow} \cite{fork-and-branch-git-workflow}.


You should know that:

\footnote{Technically, a commit copy the modifications
performed in your \emph{working copy} (of your local repo) to the
\emph{staging area} (of your local repo).}

\begin{enumerate}

\item If you want to contribute to a repo (that we will call \emph{the
upstream repo} or simply \emph{upstream}) \cite{Git-workflow} and you
  don't belong to the team of developers (such as it happens in he
  InterCom project), the first action that you must do is to
  \href{https://docs.github.com/en/github/getting-started-with-github/fork-a-repo}{fork}
  the \emph{upstream}. This will create a copy of the repo in your
  GitHub space, and the one thing that distinguish it from a repo
  directly created by youself is that there is a link to the
  \emph{upstream}.

\item You can do a lot of work in a repo hosted by GitHub using the
  Web interface, but it is much more convenient to
  \href{https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/cloning-a-repository}{clone}
  the repo.\footnote{Git is a
  \href{https://nvie.com/posts/a-successful-git-branching-model/}{decentralized
    control system for source code}. Decentralization means that every
  developer has a copy of the \emph{origin repo} (or simply
  \emph{origin}, the first instance of the repo), and that thus, the
  developers can synchromize their local repos with the
  \emph{origin}(al one) or any of the rest of developer's repos, by
  simply adding the right \emph{Git remotes}.}

\item When you copy the \emph{origin} in your local disk, you create
  the data structure shown in the
  Figure~\ref{fig:local_repo_structure_and_actions}. Such structure
  has 3 main parts: (1) The \emph{working tree}, (2) the \emph{staging
  area}, and (3) the \emph{local repo}. The modifications are carried
  on the \emph{working tree}, which can contain files and directories
  that \emph{untracked} (probably temporal files that never should be
  included in the repo). The \emph{staging area} (also called
  \emph{index}) is form by the subset of tracked files of the
  \emph{working tree}. The \emph{local repo} is the data structure
  that holds all the history of the repo. When the \emph{local repo}
  and the \emph{origin} are synchonized, their contents are the same.

\item To update your \emph{local repo} with the modifications carried
  on the \emph{working tree}, you must perform a
  \href{https://docs.github.com/en/github/getting-started-with-github/github-glossary#commit}{commit}.
  
\item At any moment, you can decide to synchronize your local repo
  with the \emph{origin} or any other \emph{remote}. This action is
  called a
  \href{https://docs.github.com/en/github/using-git/pushing-commits-to-a-remote-repository}{push}.
\item Also, at any moment, you can decide to share your modifications
  (or even only your thoughts) with the \emph{upstream}
  (developers). For that, you can do a
  \href{https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests}{pull-request}.
\end{enumerate}

You should also understand what is a
Git \href{https://docs.gitlab.com/ee/topics/gitlab_flow.html}{branch}:
\begin{enumerate}
\item \emph{Main branches}, that have infinite lifetime. All repos
  have a \emph{master} branch, which should be always deployable. Some
  have a \emph{testing} branch, in which the code is tested before it
  is included in the master (stable) branch.
\item \emph{Feature/debug branches}, which are aimed to develop a new
  functionality or to debug. Feature branches are also called topic
  branches. These type of branches have usually a short life.
\end{enumerate}

\section{What you have to do?}

\begin{enumerate}
  
\item Have a look to \href{https://git-scm.com/book/en/v2}{the Pro Git
  book} \cite{Git-book}, what as the primary source of information for
  Git.

\item If you don't have an GitHub account, please, do the
  \href{https://guides.github.com/activities/hello-world/}{the Hello
    World guide at GitHub} and create one. To contribute to InterCom
  an GitHub account is required. Notice that in the Hello World guide,
  the \texttt{master} branch is called \texttt{main} branch. Please,
  create a \texttt{README.md} file for the Hello World repo.

\item Now, we are going to to the same that we have done using the
  GitHub web interface (except Step 1: Create a Repo), but in the
  terminal. First, if Git is not installed in your host (try to run
  \texttt{git} in a terminal), install it with
  \begin{lstlisting}[language=bash]
    sudo apt install git
  \end{lstlisting}

\item
  \href{https://docs.github.com/en/github/getting-started-with-github/github-glossary#clone}{Clone}
  (download) the Hello World repo (select ``the Git protocol'', not
  ``https'' nor ``download a zip file''). You need to click on the
  ``Code'' button. Notice that a new directory named as the repo's
  name at GitHub has been created and that inside you can find the
  \texttt{README.md}
  \href{https://daringfireball.net/projects/markdown/}{Markdown} file.

\item \href{https://docs.github.com/en/github/getting-started-with-github/github-glossary#checkout}{Create (and switch to)} a
  \href{https://docs.github.com/en/github/getting-started-with-github/github-glossary#feature-branch}{feature
    branch} called \texttt{improving_readme}. In your terminal write:
  
  \begin{lstlisting}[language=bash}
    git checkout -b improving_readme
  \end{lstlisting}
  
\item Modify the \texttt{README.md} file. Append to it, for example, a
  link to the Hello World guide:
  
  \begin{lstlisting}[language=markdown}
    See the [Hello World](https://guides.github.com/activities/hello-world/) guide at GitHub.
  \end{lstlisting}
  
\item
  \href{https://docs.github.com/en/github/getting-started-with-github/github-glossary#commit}{Commit}
  your modification(s). In your first commit you will be prompted
  with:

  \begin{lstlisting}[language=bash]
    git config --global user.email "you@example.com"
  \end{lstlisting}

  Now your local repo is \emph{ahead} of your remote repo (your local
  repo has modifications that the remote repo doesn't have).

\item
  \href{https://docs.github.com/en/github/getting-started-with-github/github-glossary#push}{Push}
  your modification(s) to the remote repo (synchronize both repos). If
  you have not upoaded a public SSH key (or the corresponding private
  key is not properly installed in your computer), the GitHub server
  should have requested your username and password, and this is
  something that will happen with every push. To avoid this repetitive
  input of your GitHub login information, you need
  \href{https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh}{to
    identify you at GitHub} using
  \href{https://en.wikipedia.org/wiki/Public-key_cryptography}{public-key
    criptography}. You need to own a pair of keys, one public and
  other private, and upload the public one to GitHub.
  
\item The first step in this process is to check whether you already
  have a pair of keys (if your are using the just installed Xubuntu
  distribution, obviously you don't and go directly to the next
  step). Simply revise your \texttt{\$HOME/.ssh} directory with:

  \begin{lstlisting}[language=bash]
    ls -l ~/.ssh
  \end{lstlisting}

  and if you find a pair of file with almost the same name, but one of
  them finising in \texttt{.pub}, you have a pair of SSH keys.

\item Let's create a pair of keys. Open a terminal and write:

  \begin{lstlisting}[language=bash]
    ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
  \end{lstlisting}

  using your email address. Then you are prompted with:

  \begin{lstlisting}[language=bash]
    Enter a file in which to save the key (/home/you/.ssh/id_rsa):
  \end{lstlisting}

  just press the Enter-key, to select such output prefix. Otherwise,
  write a different one, but don't change the path to the
  \texttt{.ssh} directory.

\item Now SSH should request you for a passphrase. If you write one,
  you will be asked for it each time you push your commits to
  GitHub. There are two options to avoid this:

  \begin{enumerate}
  \item Input no passphrase (just by pressing the Enter-key
    again). This has the drawback that if somebody has your keys, he
    can access to GitHub as he were you.
  \item Input a passphrase and configure \texttt{ssh-agent} to send it
    to GitHub by you.
  \end{enumerate}

\item It is probable that the \texttt{ssh-agent} is already
  running in your computer. This can be checked with:

  \begin{lstlisting}[language=bash]
    ps aux | grep ssh-agent
  \end{lstlisting}

  and in the case of Xubuntu, you should get something similar to:

  \begin{lstlisting}[language=bash]
    989 ?        Ss     0:00 /usr/bin/ssh-agent /usr/bin/im-launch startxfce4
   1433 pts/0    S+     0:00 grep --color=auto ssh-agent
  \end{lstlisting}

  This means that there are two processes in whose description there
  exists the string \texttt{ssh-agent}. The first entry is the
  agent. The second one is only out \texttt{grep} command.

\item If the \texttt{ssh-agent} were not running, it can be launched to
  run in the background with:

  \begin{lstlisting}[language=bash]
    eval "$(ssh-agent -s)"
  \end{lstlisting}

  but you don't need to do that in your Xubuntu installation.

\item ssh-add ~/.ssh/id_rsa the passphrase will be prompt.
  
\item Settings -> SSH and GPG keys -> New SSH key
  Open a terminal and write:
  cat .ssh/id_rsa.pub
  give a title (something such as ``tec-multimedia'')
  copy and paste the content of such file (which ends with your email address) inside of the space where you can read ``Begins with 'ssh-rsa', ...''.

  \item When you use the key for the first time (clonning a repo or
    pushing a commit), the SSH client will warn you that the
    autenticity of \texttt{github.com} cannot be established. This is
    normal and should happen only once. Type \texttt{yes}.

The ssh-agent will ask for the passphrase the first time you use the keys after a rebooting.
  
\item Revise
  \href{https://github.com/vicente-gonzalez-ruiz/fork_and_branch_git_workflow}{The
    Fork and Branch Git Workflow} \cite{Git-workflow}. Basically, this
  ``protocol'' explains that to contribute to an open-source repo
  hosted by GitHub with belonging to the develop team.

\item Make a fork of the
  \href{https://github.com/Tecnologias-multimedia/intercom}{InterCom}
  project.
  
  
\end{enumerate}

\section{Timming}

You should reach this milestone at most in one week.

\section{Deliverables}

None.

\section{Resources}

\bibliography{git, intercom}
