\title{\href{https://www.ual.es/estudios/grados/presentacion/plandeestudios/asignatura/4015/40154321?idioma=zh_CN}{Tecnologías Multimedia} - Study Guide - Milestone 7: Inter-channel decorrelation in stereo audio signals (mid/side stereo coding)}

\maketitle

\section{Description}

\href{https://en.wikipedia.org/wiki/Correlation_and_dependence}{Correlation}
is a term used in statistics which refer to the interdependency
between two \href{https://en.wikipedia.org/wiki/Random_variable}{random
  variables}. It can be measured by the
\href{https://www.mathsisfun.com/data/correlation.html}{correlation
  coefficient}~\cite{thinkstats}.

In the case of InterCom, the random variables are the two channels
(left $L$ and right $R$) of the
\href{https://en.wikipedia.org/wiki/Stereophonic_sound}{stereo
  \href{https://en.wikipedia.org/wiki/Pulse-code_modulation}{PCM}
  signal}~\cite{bosi2003intro}. In most cases, both channels are going
to be \href{https://en.wikipedia.org/wiki/Binaural_recording}{highly
  correlated} (especially if the microphone is mono), which means that
we can represent one of them (for example, the $R$ channel) with
respect to the other (the $L$ channel). From a mathematical point of
view, this process can be seen as a
\href{https://en.wikipedia.org/wiki/Decorrelation}{decorrelation}
process. From a physical perspective, decorrelating implies energy
accumulation~\cite{sayood2017introduction}.

To perform this inter-channel decorrelation, we use an
\href{https://en.wikipedia.org/wiki/Orthogonal_transformation}{orthogonal}\footnote{Orthogonality
  of the transform is a important property because the correlation
  between the coefficients (the output of the transform) is 0.}
transform
\begin{equation}
  y = Kx = \frac{1}{2}\begin{bmatrix} 1 & 1 \\ 1 & -1 \end{bmatrix}x,
\end{equation}
where $x$ represents a frame (a tuple of L and R samples, $x[0]$ and
$x[1]$), $K$ is the $2\times 2$ KLT
\href{http://fourier.eng.hmc.edu/e161/lectures/klt/node3.html}{(Karhunen-Lo\`eve
  Transform)} matrix multiplied by $1/\sqrt{2}$ (which is closely
related with the \href{http://wavelets.pybytes.com/wavelet/haar/}{Haar
  transform}~\cite{vetterli1995wavelets}), and $y$ represents the
transform coefficients (in our case, a couple of coefficients $y[0]$
with the \href{https://en.wikipedia.org/wiki/Arithmetic_mean}{mean}
and $y[1]$ with the difference of the samples). Notice that this
transform is not
\href{https://en.wikipedia.org/wiki/Orthonormal_basis}{orthonormal}
(energy preserving in the transform domain) because
\begin{equation}
  \sum y[i]^2 = \frac{1}{\sqrt{2}}\sum x[i]^2,
\end{equation}
although both subbands $y[0]$ and $y[1]$ have the same gain
($\frac{1}{\sqrt{2}}$, and therefore the same ``importance'' for a
future
\href{https://en.wikipedia.org/wiki/Quantization_(signal_processing)}{quantization}
of $y$). The described transform is similar to the so called
\href{https://en.wikipedia.org/wiki/Joint_encoding#M/S_stereo_coding}{M/S
  stereo coding}, but in our case, the división by 2 is carried on
the forward transform, instead of the backward (inverse) transform.

This transform can be implemented
\href{https://en.wikipedia.org/wiki/In-place_algorithm}{\emph{in-place}}
using the following algorithm:

\begin{pseudocode}{Inter-channel\_decorrelation}{~}
  \PROCEDURE{Analyze}{\mathtt{frame}}
  \BEGIN
    \mathtt{frame[0] -= frame[1]} \\
    \mathtt{frame[1] += (frame[0] / 2)} \\
    \mathtt{frame[0] /= 2}
  \END
  \ENDPROCEDURE
  \PROCEDURE{Synthesize}{\mathtt{frame}}
  \BEGIN
    \mathtt{frame[0] *= 2} \\
    \mathtt{frame[1] -= (frame[0] / 2)} \\
    \mathtt{frame[0] += frame[1]}
  \END
  \ENDPROCEDURE
\end{pseudocode}

where $\mathtt{a~-= b}$ is a shorter representation of the operation
$\mathtt{a = a - b}$. Notice that this type of in-place computations
are commonly used in the implementation of DWTs
(\href{https://en.wikipedia.org/wiki/Discrete_wavelet_transform}{Dicrete
  Wavelet Transform}s) using
\href{https://cm-bell-labs.github.io/who/wim/papers/athome/athome.pdf}{the
  Lifting Scheme}~\cite{2006.sweldens}.

\section{What you have to do?}

\begin{enumerate}
\item In a module named \texttt{stereo\_coding.py}, inherit the class
  \texttt{Compress} and create a class named \texttt{Stereo\_coding}.
\item Override the methods \texttt{pack()} and \texttt{unpack()}. In
  \texttt{pack()} perform the Analyze() procedure previously
  described, and in \texttt{unpack()} the
  Synthesize(). These procedures should be applied to
  all the frames of a chunk using \href{https://www.oreilly.com/library/view/python-for-data/9781449323592/ch04.html}{vectorized
    operations}.
\item Has been the
  \href{https://en.wikipedia.org/wiki/Data_compression_ratio}{compression
    ratio} improved (on
  \href{https://en.wikipedia.org/wiki/Average}{average})? How much?
\end{enumerate}

\section{Timming}

You should reach this milestone at most one week.

\section{Deliverables}

The module \texttt{stereo\_coding.py}. Store
it at the
\href{https://github.com/Tecnologias-multimedia/intercom}{root
  directory} of your \texttt{intercom}'s repo.

\section{Resources}

\bibliography{maths,data-compression,DWT,audio-coding}
