<!DOCTYPE html> 
<html> 
<head> <title>TecnologÃŋas Multimedia- Study Guide - Milestone 5: Impact of the
Communication Latency</title> 
<meta charset="UTF-8" /> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<link rel="stylesheet" type="text/css" href="index.css" /> 
<script type="text/javascript" 
src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" 
></script> 
<style type="text/css"> 
.MathJax_MathML {text-indent: 0;} 
</style> 
</head><body 
>
   <div class="maketitle">
                                                                  

                                                                  
                                                                  

                                                                  

<h2 class="titleHead"><a 
href="https://www.ual.es/estudios/grados/presentacion/plandeestudios/asignatura/4015/40154321?idioma=zh_CN" >Tecnologías Multimedia</a>- Study Guide -
Milestone 5: Impact of the Communication
Latency</h2>
 <div class="author" ><a 
href="https://cms.ual.es/UAL/personas/persona.htm?id=515256515553484875" ><span 
class="ecrm-1200">Vicente Gonz</span><span 
class="ecrm-1200">á</span><span 
class="ecrm-1200">lez Ruiz</span></a> <span 
class="ecrm-1200">- </span><a 
href="https://cms.ual.es/UAL/universidad/departamentos/informatica/index.htm" ><span 
class="ecrm-1200">Depto Inform</span><span 
class="ecrm-1200">á</span><span 
class="ecrm-1200">tica</span></a> <span 
class="ecrm-1200">- </span><a 
href="https://www.ual.es" ><span 
class="ecrm-1200">UAL</span></a></div><br />
<div class="date" ><span 
class="ecrm-1200">October 13, 2020</span></div>
   </div>
   <h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-10001"></a>Description</h3>
<!--l. 9--><p class="noindent" ><a 
href="https://en.wikipedia.org/wiki/Latency_(engineering)#Communication_latency" >Communication latency</a> (also called <a 
href="https://en.wikipedia.org/wiki/Network_delay" >network delay</a> and <a 
href="https://en.wikipedia.org/wiki/End-to-end_delay" >end-to-end delay</a>) is the time
that a piece of data (a <a 
href="https://en.wikipedia.org/wiki/Network_packet" >packed</a> in the case of the Internet) takes to travel from one point
of the network to another. This time is relevant for an intercom because the total latency
<!--l. 15--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>u</mi></mrow></msub 
></math> that
an user is going to experiment is </p><table class="equation"><tr><td> <a 
 id="x1-1001r1"></a>
<!--l. 16--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                            <msub><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>u</mi></mrow></msub 
> <mo 
class="MathClass-rel">=</mo> <msub><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>l</mi></mrow></msub 
> <mo 
class="MathClass-bin">+</mo> <msub><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
><mo 
class="MathClass-punc">,</mo>
</math></td><td class="eq-no">(1)</td></tr></table>
<!--l. 20--><p class="indent" >   where <!--l. 20--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>l</mi></mrow></msub 
></math>
is the (tele-communication) <a 
href="https://en.wikipedia.org/wiki/Telecommunications_link" >link</a> latency and
<!--l. 22--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math> is the
latency generated by the intercom.
                                                                  

                                                                  
</p><!--l. 24--><p class="indent" >   Due to the current design of the Internet (where the available
<a 
href="https://en.wikipedia.org/wiki/Bandwidth_(computing)" >bandwidth</a> is shared on demand by the users of the network)
<!--l. 26--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>l</mi></mrow></msub 
></math> is
time-variying, and cannot be controlled without using <a 
href="https://en.wikipedia.org/wiki/Quality_of_service" >Quality of Service (QoS)</a>,
something that is not accesible to normal network users. On the contrary,
<!--l. 30--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math> is
constant for a given intercom’s conﬁguration/implementation.
</p><!--l. 33--><p class="indent" >   In this milestone we are going to measure the <a 
href="https://en.wikipedia.org/wiki/Quality_of_experience" >Quality of Experience (QoE)</a>
provided by our minimal intercom when the network latency varies <a 
href="https://en.wikipedia.org/wiki/Randomness" >at random</a>. At
this point, we have basically two alternatives:
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-1003x1">Run two instances of InterCom in two diﬀerent hosts separated by a shared
     link.
     </li>
     <li 
  class="enumerate" id="x1-1005x2">Run one instance of Intercom and simulate the network latency.</li></ol>
<!--l. 43--><p class="noindent" >Each option has pros and cons, from which we can highlight that:
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-1007x1">(Pro) The use of real latency is going to show the deﬁnitive behaviour of
     InterCom between the used hosts, which is quite impredictable (depend
     basically  of  the  <a 
href="https://en.wikipedia.org/wiki/Network_congestion" >network  congestion</a>).  (Con)  To  run  InterCom  in  two
     diﬀerent hosts we will need to establish a direct communication between
     them  and  it  is  very  likely  that  we  will  have  to  redirect  ports  in  the
     corresponding <a 
href="https://en.wikipedia.org/wiki/Network_address_translation" >NAT</a> devices <span class="cite">[]</span>.
     </li>
     <li 
  class="enumerate" id="x1-1009x2">(Pro) The simulation of the link latency is much more straightforward
     than  the  opening  ports  in  our  routers  and  (pro)  will  allow  us  to  run
     InterCom  in  situations  that  are  diﬃcult  to  achieve  in  a  real  network.
     (Con) The running environment must provide a way of controlling the
     latency between <a 
href="https://en.wikipedia.org/wiki/Process_(computing)" >processes</a>. Fortunately, in Linux we can control the latency
     (and the <a 
href="https://en.wikipedia.org/wiki/Bit_rate" >bit-rate</a>) of the outgoing (packets) traﬃc using the command
     <a 
href="https://man7.org/linux/man-pages/man8/tc.8.html" ><!--l. 63--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>t</mi><mi 
>c</mi></mstyle></math></a>.</li></ol>
<!--l. 66--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-20002"></a>What you have to do?</h3>
<!--l. 68--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.1   </span> <a 
 id="x1-30002.1"></a>Characterize the latency in diﬀerent scenarios</h4>
                                                                  

                                                                  
<!--l. 70--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.1   </span> <a 
 id="x1-40002.1.1"></a>In your host</h5>
<!--l. 72--><p class="noindent" >In most cases we will test InterCom in your host. Therefore, it can be useful to have
an idea of how the latencies are distributed, at least from a statistical point of
view.
</p><!--l. 76--><p class="indent" >
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-4002x1">Ping <span 
class="ectt-1000">localhost</span>: <!--l. 78-->
<a 
 id="x1-4003"></a>
     <div class="lstlisting" id="listing-1"><span class="label"><a 
 id="x1-4004r1"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">ping</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">localhost</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">-</span><span 
class="ectt-1000">c</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">100</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003E;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">/</span><span 
class="ectt-1000">tmp</span><span 
class="ectt-1000">/</span><span 
class="ectt-1000">ping</span><span 
class="ectt-1000">.</span><span 
class="ectt-1000">dat</span>
     
     </div>
     <!--l. 81--><p class="noindent" >Compute the expected (considering that the <a 
href="https://en.wikipedia.org/wiki/Round-trip_delay" >RTT</a> should double the) latency to
     the host of your interlocutor:<br 
class="newline" /><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> grep from &#x003C; /tmp/ping.dat | cut -f 4 -d &#x0022;=&#x0022; | cut -f 1 -d &#x0022; &#x0022;</span>
     <span 
class="ectt-1000">| awk </span><span 
class="tctt-1000">&#x0027;</span><span 
class="ectt-1000">{print $1/2}</span><span 
class="tctt-1000">&#x0027;</span><span 
class="ectt-1000">&#x003E; /tmp/localhost_latencies.dat</span>
</p>
     <!--l. 88-->
     <div class="lstlisting" id="listing-2"><span class="label"><a 
 id="x1-4005r1"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">grep</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">from</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">/</span><span 
class="ectt-1000">tmp</span><span 
class="ectt-1000">/</span><span 
class="ectt-1000">ping</span><span 
class="ectt-1000">.</span><span 
class="ectt-1000">dat</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">|</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">cut</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">-</span><span 
class="ectt-1000">f</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">4</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">-</span><span 
class="ectt-1000">d</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x0022;=&#x0022;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">|</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">cut</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">-</span><span 
class="ectt-1000">f</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">1</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">-</span><span 
class="ectt-1000">d</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x0022;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x0022;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">|</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">awk</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">’{</span><span 
class="ectt-1000">print</span><span 
class="ectt-1000"> </span><!--l. 89--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="mbox"><mtext  >$</mtext></mstyle></math>1/2}’ &#x003E; /tmp/localhost\_latencies.dat
     
     </div>
     </li>
     <li 
  class="enumerate" id="x1-4007x2">Find the histogram of the expected latencies: <!--l. 93-->
<a 
 id="x1-4008"></a>
     <div class="lstlisting" id="listing-3"><span class="label"><a 
 id="x1-4009r1"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">cat</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;&#x003C;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">EOF</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">|</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">python</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">-</span><span 
class="ectt-1000"> </span><br /><span class="label"><a 
 id="x1-4010r2"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">import</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">numpy</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">as</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">np</span><span 
class="ectt-1000"> </span><br /><span class="label"><a 
 id="x1-4011r3"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">from</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">scipy</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">import</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">stats</span><span 
class="ectt-1000"> </span><br /><span class="label"><a 
 id="x1-4012r4"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">latencies</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">=</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">np</span><span 
class="ectt-1000">.</span><span 
class="ectt-1000">loadtxt</span><span 
class="ectt-1000">(&#x0022;/</span><span 
class="ectt-1000">tmp</span><span 
class="ectt-1000">/</span><span 
class="ectt-1000">localhost_latencies</span><span 
class="ectt-1000">.</span><span 
class="ectt-1000">dat</span><span 
class="ectt-1000">&#x0022;)</span><span 
class="ectt-1000"> </span><br /><span class="label"><a 
 id="x1-4013r5"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">average_latency</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">=</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">np</span><span 
class="ectt-1000">.</span><span 
class="ectt-1000">average</span><span 
class="ectt-1000">(</span><span 
class="ectt-1000">latencies</span><span 
class="ectt-1000">)</span><span 
class="ectt-1000"> </span><br /><span class="label"><a 
 id="x1-4014r6"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">print</span><span 
class="ectt-1000">(&#x0022;</span><span 
class="ectt-1000">average</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">latency</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">=&#x0022;,</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">average_latency</span><span 
class="ectt-1000">)</span><span 
class="ectt-1000"> </span><br /><span class="label"><a 
 id="x1-4015r7"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">max_latency</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">=</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">np</span><span 
class="ectt-1000">.</span><span 
class="ectt-1000">max</span><span 
class="ectt-1000">(</span><span 
class="ectt-1000">latencies</span><span 
class="ectt-1000">)</span><span 
class="ectt-1000"> </span><br /><span class="label"><a 
 id="x1-4016r8"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">min_latency</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">=</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">np</span><span 
class="ectt-1000">.</span><span 
class="ectt-1000">min</span><span 
class="ectt-1000">(</span><span 
class="ectt-1000">latencies</span><span 
class="ectt-1000">)</span><span 
class="ectt-1000"> </span><br /><span class="label"><a 
 id="x1-4017r9"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">maximum_absolute_deviation</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">=</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">max</span><span 
class="ectt-1000">(</span><span 
class="ectt-1000">max_latency</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">-</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">average_latency</span><span 
class="ectt-1000">,</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">average_latency</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">-</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">min_latency</span><span 
class="ectt-1000">)</span><span 
class="ectt-1000"> </span><br /><span class="label"><a 
 id="x1-4018r10"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">print</span><span 
class="ectt-1000">(&#x0022;</span><span 
class="ectt-1000">maximum</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">absolute</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">deviation</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">(</span><span 
class="ectt-1000">jitter</span><span 
class="ectt-1000">)=&#x0022;,</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">maximum_absolute_deviation</span><span 
class="ectt-1000">)</span><span 
class="ectt-1000"> </span><br /><span class="label"><a 
 id="x1-4019r11"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">print</span><span 
class="ectt-1000">(&#x0022;</span><span 
class="ectt-1000">Pearson</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">correlation</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">coefficient</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">=&#x0022;,</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">stats</span><span 
class="ectt-1000">.</span><span 
class="ectt-1000">pearsonr</span><span 
class="ectt-1000">(</span><span 
class="ectt-1000">latencies</span><span 
class="ectt-1000">,</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">np</span><span 
class="ectt-1000">.</span><span 
class="ectt-1000">roll</span><span 
class="ectt-1000">(</span><span 
class="ectt-1000">latencies</span><span 
class="ectt-1000">,</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">1)[0])</span><span 
class="ectt-1000"> </span><br /><span class="label"><a 
 id="x1-4020r12"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">histogram</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">=</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">np</span><span 
class="ectt-1000">.</span><span 
class="ectt-1000">histogram</span><span 
class="ectt-1000">(</span><span 
class="ectt-1000">latencies</span><span 
class="ectt-1000">)</span><span 
class="ectt-1000"> </span><br /><span class="label"><a 
 id="x1-4021r13"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">np</span><span 
class="ectt-1000">.</span><span 
class="ectt-1000">savetxt</span><span 
class="ectt-1000">(&#x0022;/</span><span 
class="ectt-1000">tmp</span><span 
class="ectt-1000">/</span><span 
class="ectt-1000">localhost_histogram</span><span 
class="ectt-1000">.</span><span 
class="ectt-1000">dat</span><span 
class="ectt-1000">&#x0022;,</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">histogram</span><span 
class="ectt-1000">[0])</span><span 
class="ectt-1000"> </span><br /><span class="label"><a 
 id="x1-4022r14"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">EOF</span>
     
     </div>
     </li>
     <li 
  class="enumerate" id="x1-4024x3">Plot the histogram: <!--l. 111-->
     <div class="lstlisting" id="listing-4"><span class="label"><a 
 id="x1-4025r2"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">gnuplot</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">plot</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x0022;/</span><span 
class="ectt-1000">tmp</span><span 
class="ectt-1000">/</span><span 
class="ectt-1000">localhost_histogram</span><span 
class="ectt-1000">.</span><span 
class="ectt-1000">dat</span><span 
class="ectt-1000">&#x0022;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">with</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">histogram</span>
     
     </div>
     </li>
     <li 
  class="enumerate" id="x1-4027x4">Characterize statistically the latency: which statistical distribution is more close
     to your experimental data?</li></ol>
                                                                  

                                                                  
<!--l. 119--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.2   </span> <a 
 id="x1-50002.1.2"></a>In the Internet</h5>
<!--l. 121--><p class="noindent" >This scenario can be useful to test InterCom in your host but simulating a real
connection between hosts in diﬀerent home networks. For doing that:
</p><!--l. 125--><p class="indent" >
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-5002x1">Repeat      the      previous      experiment      (the      characterization
     of the latencies returned by the <span 
class="ectt-1000">ping </span>tool) but using your interlocutor’s
     <span 
class="ectt-1000">&#x003C;router_public_IP_address&#x003E; </span>instead of <span 
class="ectt-1000">localhost</span>. Call the generated
     ﬁle as <span 
class="ectt-1000">/tmp/&#x003C;router_public_IP_address&#x003E;.dat</span>.
     </li>
     <li 
  class="enumerate" id="x1-5004x2">Request   to   your   interlocutor   to   ping   its   router   from   his/her
     private  network,  and  to  send  this  data  to  you.  Save  this  info  in
     <span 
class="ectt-1000">/tmp/&#x003C;router_private_IP_address&#x003E;.dat </span>and characterize it.
     </li>
     <li 
  class="enumerate" id="x1-5006x3">Supposing that the latencies are symmetric (the direction of the packes
     does not aﬀect to the latency) and that the overall network latency of
     the link between you a your interlocutor is the sum of the latency from
     your host to the router of your interlocutor and the latency from your
     interlocutor’s host to that router, ﬁnd a characterization for the full link:
     <a 
href="https://en.wikipedia.org/wiki/Average" >average</a> (arithmetic mean) latency, <a 
href="https://en.wikipedia.org/wiki/Jitter" >jitter</a>, <a 
href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient" >Pearson correlation coeﬃcient</a>,
     and <a 
href="https://en.wikipedia.org/wiki/List_of_probability_distributions" >probability distribution</a>.
     </li></ol>
<!--l. 152--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.2   </span> <a 
 id="x1-60002.2"></a>Quantiﬁcation of the QoE without packed loss</h4>
<!--l. 154--><p class="noindent" >Let’s measure the QoE using the following classiﬁcation: </p>
     <ul class="itemize1">
     <li class="itemize">Perfect: no loss or delay can be distinguish.
     </li>
     <li class="itemize">Good: if you detect some minimal distortion in the rendering of the sound.
     </li>
     <li class="itemize">Acceptable: when the eﬀects of the latency are apreciable, but you can
     communicate with your interlocutor.
     </li>
     <li class="itemize">Bad: you are able to recognize only small parts of the received audio.
                                                                  

                                                                  
     </li>
     <li class="itemize">No way: when most of the time only silence is heard.</li></ul>
<!--l. 166--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.2.1   </span> <a 
 id="x1-70002.2.1"></a>In your host</h5>
<!--l. 168--><p class="noindent" >You don’t need to control the network traﬃc in this scenario because it is already
shapped when InterCom uses the loopback network device. Therefore, simply
quantify your QoE when you run InterCom in your host.
</p><!--l. 173--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.2.2   </span> <a 
 id="x1-80002.2.2"></a>In the Internet</h5>
<!--l. 175--><p class="noindent" >
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-8002x1">Using the characterization of the Internet link previously obtained, use
     the command <a 
href="https://man7.org/linux/man-pages/man8/tc.8.html" ><span 
class="ectt-1000">tc</span></a> to simulate this link locally using <a 
href="https://man7.org/linux/man-pages/man8/tc-netem.8.html" >netem</a>:
     <!--l. 183-->
     <div class="lstlisting" id="listing-5"><span class="label"><a 
 id="x1-8003r3"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">sudo</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">tc</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">qdisc</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">add</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">dev</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">lo</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">root</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">netem</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">delay</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;</span><span 
class="ectt-1000">average_dalay_in_miliseconds</span><span 
class="ectt-1000">&#x003E;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;</span><span 
class="ectt-1000">maximum_average_deviation_in_miliseconds</span><span 
class="ectt-1000">&#x003E;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;</span><span 
class="ectt-1000">Pearson_correlation_coefficient_expressed_as_a_percentage</span><span 
class="ectt-1000">&#x003E;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">distribution</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;</span><span 
class="ectt-1000">uniform</span><span 
class="ectt-1000">|</span><span 
class="ectt-1000">normal</span><span 
class="ectt-1000">|</span><span 
class="ectt-1000">pareto</span><span 
class="ectt-1000">|</span><span 
class="ectt-1000">paretonormal</span><span 
class="ectt-1000">&#x003E;</span>
     
     </div>
     <!--l. 186--><p class="noindent" >where:
         </p><dl class="description"><dt class="description">
     <span 
class="ectt-1000">qdisc</span><span 
class="ecbx-1000">:</span> </dt><dd 
class="description">Use the default <a 
href="https://en.wikipedia.org/wiki/FIFO_(computing_and_electronics)" >FIFO</a> <a 
href="https://wiki.debian.org/TrafficControl" >Queueing DISCipline</a> for the outgoing traﬃc.
         </dd><dt class="description">
     <span 
class="ectt-1000">add</span><span 
class="ecbx-1000">:</span> </dt><dd 
class="description">Add a new traﬃc control rule.
         </dd><dt class="description">
     <span 
class="ectt-1000">dev lo</span><span 
class="ecbx-1000">:</span> </dt><dd 
class="description">The device aﬀected by the rule. <span 
class="ectt-1000">lo </span>means <span 
class="ectt-1000">loopback</span>.
         </dd><dt class="description">
     <span 
class="ectt-1000">root</span><span 
class="ecbx-1000">:</span> </dt><dd 
class="description">The rule will be applied to all the outbound traﬃc (it’s the root
         rule of the possible tree of rules).
         </dd><dt class="description">
     <span 
class="ectt-1000">netem</span><span 
class="ecbx-1000">:</span> </dt><dd 
class="description">Use the <a 
href="https://wiki.linuxfoundation.org/networking/netem" >network emulator</a> to emulate a WAN property.</dd></dl>
     </li>
     <li 
  class="enumerate" id="x1-8005x2">Measure the QoE.
     </li>
     <li 
  class="enumerate" id="x1-8007x3">Remove the <span 
class="ectt-1000">tc </span>rule with.
     <!--l. 206-->
                                                                  

                                                                  
     <div class="lstlisting" id="listing-6"><span class="label"><a 
 id="x1-8008r4"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">sudo</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">tc</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">qdisc</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">delete</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">dev</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">lo</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">root</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">netem</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">delay</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;</span><span 
class="ectt-1000">average_dalay_in_miliseconds</span><span 
class="ectt-1000">&#x003E;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;</span><span 
class="ectt-1000">maximum_average_deviation_in_miliseconds</span><span 
class="ectt-1000">&#x003E;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;</span><span 
class="ectt-1000">Pearson_correlation_coefficient_expressed_as_a_percentage</span><span 
class="ectt-1000">&#x003E;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">distribution</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;</span><span 
class="ectt-1000">uniform</span><span 
class="ectt-1000">|</span><span 
class="ectt-1000">normal</span><span 
class="ectt-1000">|</span><span 
class="ectt-1000">pareto</span><span 
class="ectt-1000">|</span><span 
class="ectt-1000">paretonormal</span><span 
class="ectt-1000">&#x003E;</span>
     
     </div>
     </li>
     <li 
  class="enumerate" id="x1-8010x4">(Optional) You can see the current rules with:
     <!--l. 212-->
     <div class="lstlisting" id="listing-7"><span class="label"><a 
 id="x1-8011r5"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">tc</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">qdisc</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">show</span>
     
     </div>
     </li>
     <li 
  class="enumerate" id="x1-8013x5">(Optional) It’s possible to change a working rule with:
     <!--l. 218-->
     <div class="lstlisting" id="listing-8"><span class="label"><a 
 id="x1-8014r6"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">sudo</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">tc</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">qdisc</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">change</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">dev</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">lo</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">root</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">netem</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">delay</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;</span><span 
class="ectt-1000">average_dalay_in_miliseconds</span><span 
class="ectt-1000">&#x003E;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;</span><span 
class="ectt-1000">maximum_average_deviation_in_miliseconds</span><span 
class="ectt-1000">&#x003E;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;</span><span 
class="ectt-1000">Pearson_correlation_coefficient_expressed_as_a_percentage</span><span 
class="ectt-1000">&#x003E;</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">distribution</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">&#x003C;</span><span 
class="ectt-1000">uniform</span><span 
class="ectt-1000">|</span><span 
class="ectt-1000">normal</span><span 
class="ectt-1000">|</span><span 
class="ectt-1000">pareto</span><span 
class="ectt-1000">|</span><span 
class="ectt-1000">paretonormal</span><span 
class="ectt-1000">&#x003E;</span>
     
     </div>
     </li></ol>
<!--l. 224--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.3   </span> <a 
 id="x1-90002.3"></a>(Optional) QoE considering the packet loss</h4>
<!--l. 226--><p class="noindent" >For our application, InterCom, a chunk is lost when it arrives too late or it never
arrives. Therefore, the results of a packet loss or a packet delay are almost
indistinguishable, except by the average latency experimented by the user (the higher
the network latency, the higher the perceived latency).
</p><!--l. 232--><p class="indent" >   For example, the packet loss ratio of
<!--l. 232--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>1</mn><mn>0</mn><mi 
>%</mi></math> can
be controlled with <span 
class="ectt-1000">tc </span>by running:
</p>
   <!--l. 235-->
   <div class="lstlisting" id="listing-9"><span class="label"><a 
 id="x1-9001r7"></a></span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">sudo</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">tc</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">qdisc</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">add</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">dev</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">lo</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">root</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">netem</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">loss</span><span 
class="ectt-1000"> </span><span 
class="ectt-1000">10%</span>
   
   </div>
                                                                  

                                                                  
<!--l. 239--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-100003"></a>Timming</h3>
<!--l. 241--><p class="noindent" >Please, ﬁnish this milestone in one week.
</p><!--l. 243--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-110004"></a>Deliverables</h3>
<!--l. 245--><p class="noindent" >A report showing your results.
</p><!--l. 247--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-120005"></a>Resources</h3>
<a 
 id="Q1-1-15"></a>
    
</body> 
</html>
                                                                  


